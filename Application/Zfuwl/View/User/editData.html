<!DOCTYPE html>
<html>
    <head>
    <include file='Public/top'/>
    <style>
        /* 案例 */
        .fly-case-header{position: relative; height: 260px; text-align: center; background: #393D49;}
        .fly-case-year{position: absolute; top: 30px; width: 100%; line-height: 50px; font-size: 50px; text-align: center; color: #fff; font-weight: 300;}
        .fly-case-banner{position: absolute; left: 50%; top: 100px; width: 670px; margin-left: -335px;}
        .fly-case-btn{position: absolute; bottom: 30px; left: 0; width: 100%; text-align: center;}
        .fly-case-btn a{color: #fff;}
        .fly-case-btn .layui-btn-primary{background: none; color: #fff;}
        .fly-case-btn .layui-btn-primary:hover{border-color: #5FB878;}
        .fly-case-tab{margin-top: 20px; text-align: center;}
        .fly-case-tab span,
        .fly-case-tab span a{border-color: #009688;}
        .fly-case-tab .tab-this{background-color: #009688; color: #fff;}
        .fly-case-list{margin-top: 15px; font-size: 0;}
        .fly-case-list li,
        .layer-ext-ul li{display: inline-block; vertical-align: middle; *display: inline; *zoom:1; font-size: 14px; background-color: #fff;}
        .fly-case-list{width: 100%;}
        .fly-case-list li{width: 239px; margin: 0 15px 15px 0; padding: 10px;}
        .fly-case-list li:hover{box-shadow: 1px 1px 5px rgba(0,0,0,.1);}
        .fly-case-img{position: relative; display: block;}
        .fly-case-img img{width: 239px; height: 239px;}
        .fly-case-img .layui-btn{display: none; position: absolute; bottom: 20px; left: 50%; margin-left: -29px;}
        .fly-case-img:hover .layui-btn{display: inline-block;}
        .fly-case-list li h2{padding: 10px 0 5px; line-height: 22px; font-size: 18px; white-space: nowrap; overflow: hidden; text-align: center;}
        .fly-case-desc{height: 60px; line-height: 20px; font-size: 12px; color: #666; overflow: hidden;}
        .fly-case-info{position: relative; margin: 10px 0 0; padding: 10px 65px 0 45px; border-top: 1px dotted #eee;}
        .fly-case-info p{height:24px; line-height: 24px;}
        .fly-case-user{position: absolute; left: 0; top: 15px; width: 35px; height: 35px;}
        .fly-case-user img{width: 35px; height: 35px; border-radius: 100%;}
        .fly-case-info .layui-btn{position: absolute; right: 0; top: 15px;  padding: 0 15px;}
        .layer-ext-ul{margin: 10px; max-height: 500px;}
        .layer-ext-ul img{width: 50px; height: 50px; border-radius: 100%;}
        .layer-ext-ul li{margin: 8px;}
        .layer-ext-case .layui-layer-title{border: none; background-color: #009688; color: #fff;}
    </style>
</head>
<body>
    <div class="admin-main">
        <fieldset class="layui-elem-field">
            <div class="test-table-reload-btn" style="margin-top: 10px;margin-left:15px;">
                <button type="button" class="layui-btn"><i class="layui-icon">&#xe628;</i>  {$info['account']} 资料管理</button>
                <button  type="button" class="layui-btn layui-btn-danger pull-right" onclick="history.go(-1);" style="float:right;"><i class="layui-icon">&#xe603;</i> 返回</button>
            </div>
            <div class="layui-field-box">
                <form class="layui-form layui-form-pane" action="">
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">会员账号</label>
                            <div class="layui-input-block"> <input type="text" readonly value="{$info['account']}" placeholder="会员账号"  autocomplete="off" class="layui-input" lay-verify="required"></div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">会员呢称</label>
                            <div class="layui-input-block">
                                <input type="text" name="nickname" value="{$info['nickname']}" placeholder="会员呢称" autocomplete="off" class="layui-input"/>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">会员姓名</label>
                            <div class="layui-input-block">
                                <input type="text" name="username" value="{$userDataInfo['username']}" placeholder="会员姓名"   autocomplete="off" class="layui-input" />
                            </div>
                        </div>
                        <div class="layui-inline layui-form-item" pane="">
                            <label class="layui-form-label">会员性别</label>
                            <div class="layui-input-block">
                                <foreach name="sexType" item="v" key="k">
                                    <input type="radio" name="sex" value="{$k}" title="{$v}" <if condition="$userDataInfo.sex eq $k">checked=""</if>>
                                </foreach>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">手机号码</label>
                            <div class="layui-input-block">
                                <input type="text" name="mobile" value="{$userDataInfo['mobile']}" placeholder="手机号码"   autocomplete="off" class="layui-input" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" onKeyUp="this.value = this.value.replace(/[^\d.]/g, '')"/>
                            </div>
                        </div>
                        <div class="layui-inline layui-form-item" pane="">
                            <label class="layui-form-label">手机号验证</label>
                            <div class="layui-input-block">
                                <input type="radio" name="is_mobile" value="1" title="己验证" <if condition="$userDataInfo.is_mobile eq 1">checked=""</if>>
                                <input type="radio" name="is_mobile" value="2" title="未验证" <if condition="$userDataInfo.is_mobile eq 2">checked=""</if>>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">邮箱号码</label>
                            <div class="layui-input-block">
                                <input type="text" name="email" value="{$userDataInfo['email']}" placeholder="邮箱号码" autocomplete="off" class="layui-input"/>
                            </div>
                        </div>
                        <div class="layui-inline layui-form-item" pane="">
                            <label class="layui-form-label">邮箱号验证</label>
                            <div class="layui-input-block">
                                <input type="radio" name="is_email" value="1" title="己验证" <if condition="$userDataInfo.is_email eq 1">checked=""</if>>
                                <input type="radio" name="is_email" value="2" title="未验证" <if condition="$userDataInfo.is_email eq 2">checked=""</if>>
                            </div>
                        </div>
                    </div>


                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">QQ账号</label>
                            <div class="layui-input-block">
                                <input type="text" name="qq_name" value="{$userDataInfo['qq_name']}" placeholder="QQ账号" lay-verify="title" autocomplete="off" class="layui-input" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" onKeyUp="this.value = this.value.replace(/[^\d.]/g, '')">
                            </div>
                        </div>
                        <label class="control-label"> </label>
                    </div>

                    <div class="layui-form-item">
                        <!-- <div class="layui-inline">
                            <label class="layui-form-label">云联惠ID</label>
                            <div class="layui-input-block">
                                <input type="text" name="ylh_name" value="{$userDataInfo['ylh_name']}" placeholder="云联惠ID" lay-verify="title" autocomplete="off" class="layui-input" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" onKeyUp="this.value = this.value.replace(/[^\d.]/g, '')">
                            </div>
                        </div>
                        <label class="control-label"> </label>
                        <div class="layui-inline">
                            <label class="layui-form-label">云付通账号</label>
                            <div class="layui-input-block">
                                <input type="text" name="yft_name" value="{$userDataInfo['yft_name']}" placeholder="云付通账号" lay-verify="title" autocomplete="off" class="layui-input" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" onKeyUp="this.value = this.value.replace(/[^\d.]/g, '')">
                            </div>
                        </div>
                        <label class="control-label"> </label>
                        <div class="layui-inline">
                            <label class="layui-form-label">悦花越有号</label>
                            <div class="layui-input-block">
                                <input type="text" name="yhy_name" value="{$userDataInfo['yhy_name']}" placeholder="悦花越有号" lay-verify="title" autocomplete="off" class="layui-input" onpaste="this.value=this.value.replace(/[^\d.]/g,'')" onKeyUp="this.value = this.value.replace(/[^\d.]/g, '')">
                            </div>
                        </div>
                        <label class="control-label"> </label>

                    </div>-->

                    <ul class="fly-case-list">
                        <li data-id="123">
                            <input type="hidden" name="head" value="{$userDataInfo['head']|default='__PUBLIC__/images/not_adv.jpg'}" placeholder="请上传头像" autocomplete="off" id="userHead" class="layui-input" />
                            <a class="fly-case-img" href="javaScript:void(0);"><img class="userHead checkImg" src="{$userDataInfo['head']|default='__PUBLIC__/images/not_adv.jpg'}" alt="会员头像"></a>
                            <div class="fly-case-info">
                                <a href="javaScript:void(0);" class="fly-case-user" target="_blank"><img src="{$userDataInfo['head']|default='__PUBLIC__/images/not_adv.jpg'}"></a>
                                <p class="layui-elip" style="font-size: 12px;"><span style="color: #666;">规格</span> 64 * 64 px</p>
                                <p>会员头像</p>
                                <button class="layui-btn uploadImg" type="button" lay-data="{field: 'userHead',data:{dir:'User', field:'userHead'}}"><i class="layui-icon">&#xe62f;</i>上传</button>
                            </div>
                        </li>
                        <li data-id="123">
                            <input type="hidden" name="imgz" value="{$userDataInfo['imgz']|default='__PUBLIC__/images/not_adv.jpg'}" placeholder="请上传身份证正面" autocomplete="off" id="imgz" class="layui-input" />
                            <a class="fly-case-img" href="javaScript:void(0);"><img src="{$userDataInfo['imgz']|default='__PUBLIC__/images/not_adv.jpg'}" alt="身份证正面" class="imgz checkImg" ></a>
                            <div class="fly-case-info">
                                <a href="javaScript:void(0);" class="fly-case-user" target="_blank"><img src="{$userDataInfo['imgz']|default='__PUBLIC__/images/not_adv.jpg'}"></a>
                                <p class="layui-elip" style="font-size: 12px;"><span style="color: #666;">规格</span> 120 * 60 px</p>
                                <p>身份证正面</p>
                                <button class="layui-btn uploadImg" type="button" lay-data="{field: 'imgz',data:{dir:'Web', field:'imgz'}}"><i class="layui-icon">&#xe62f;</i>上传</button>
                            </div>
                        </li>
                        <li data-id="123">
                            <input type="hidden" name="imgf" value="{$userDataInfo['imgf']|default='__PUBLIC__/images/not_adv.jpg'}" placeholder="请上传身份证反面" autocomplete="off" id="imgf" class="layui-input" />
                            <a class="fly-case-img" href="javaScript:void(0);"><img src="{$userDataInfo['imgf']|default='__PUBLIC__/images/not_adv.jpg'}" alt="身份证反面" class="imgf checkImg" ></a>
                            <div class="fly-case-info">
                                <a href="javaScript:void(0);" class="fly-case-user" target="_blank"><img src="{$userDataInfo['imgf']|default='__PUBLIC__/images/not_adv.jpg'}"></a>
                                <p class="layui-elip" style="font-size: 12px;"><span style="color: #666;">规格</span> 120 * 60 px</p>
                                <p>身份证反面</p>
                                <button class="layui-btn uploadImg" type="button" lay-data="{field: 'imgf',data:{dir:'Web', field:'imgf'}}"><i class="layui-icon">&#xe62f;</i>上传</button>
                            </div>
                        </li>
                    </ul>
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">身份证号码</label>
                            <div class="layui-input-block">
                                <input type="text" name="number" value="{$userDataInfo['number']}" placeholder="身份证号码" autocomplete="off" class="layui-input"/>
                            </div>
                        </div>
                        <div class="layui-inline layui-form-item" pane="">
                            <label class="layui-form-label">身份证验证</label>
                            <div class="layui-input-block">
                                <input type="radio" name="is_number" value="1" title="己验证" <if condition="$userDataInfo.is_number eq 1">checked=""</if>>
                                <input type="radio" name="is_number" value="2" title="未验证" <if condition="$userDataInfo.is_number eq 2">checked=""</if>>
                            </div>
                        </div>
                    </div>


                    <!-- <div class="layui-form-item">
                        <label class="layui-form-label">所属国籍</label>
                        <div class="layui-input-inline">
                            <select name="country" lay-search="">
                                <option value="0">--请选择国籍--</option>
                                    <foreach name="countryInfo" item="v" key="k">
                                        <option value="{$k}" <if condition="$k eq $userDataInfo['country']">selected</if>>{$v}</option>
                                    </foreach>
                            </select>
                        </div>
                    </div> -->
                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">所属省份</label>
                            <div class="layui-input-inline">
                                <select name="province" lay-ignore class="layui-input" id="province" onChange="get_city(this)">
                                    <option value="0">--请选择--</option>
                                        <volist name="province" id="p">
                                        <option <if condition="$p['id'] eq $userDataInfo['province']"> selected </if> value="{$p.id}">{$p.name_cn}</option>
                                    </volist>
                                </select>
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">所属城市</label>
                            <div class="layui-input-inline">
                                <select name="city" lay-ignore id="city" class="layui-input"  onChange="get_area(this)">
                                    <option value="0">--请选择--</option>
                                     <volist name="city" id="p">
                                        <option <if condition="$p['id'] eq $userDataInfo['city']"> selected </if>  value="{$p.id}">{$p.name_cn}</option>
                                    </volist>
                                </select>
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">所属县镇</label>
                            <div class="layui-input-inline">
                                <select lay-ignore name="district" id="district" class="layui-input" onChange="get_twon(this)">
                                    <option value="0">--请选择--</option>
                                    <volist name="district" id="p">
                                        <option <if condition="$p['id'] eq $userDataInfo['district']"> selected </if> value="{$p.id}">{$p.name_cn}</option>
                                    </volist>
                                </select>
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">所属乡镇</label>
                            <div class="layui-input-inline">
                                <select lay-ignore <if condition="$userDataInfo['twon'] eq ''">style="display:none;"</if> class="layui-input" name="twon" id="twon" class="layui-input">
                                    <option value="0">--请选择--</option>
                                    <volist name="twon" id="p">
                                        <option <if condition="$p['id'] eq $userDataInfo['twon']"> selected </if> value="{$p.id}">{$p.name_cn}</option>
                                    </volist>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">详细地址</label>
                        <div class="layui-input-block">
                          <input type="text" name="address" value="{$userDataInfo['address']}"  autocomplete="off" placeholder="详细地址" class="layui-input">
                        </div>
                    </div>
                    <!-- <div class="layui-form-item">
                        <label class="layui-form-label">奖金激活</label>
                        <div class="layui-input-block">
                            <input type="radio" name="jiangjin_jihuo_status" value="1" title="是" <if condition="$info.jiangjin_jihuo_status eq 1">checked=""</if>>
                            <input type="radio" name="jiangjin_jihuo_status" value="2" title="否" <if condition="$info.jiangjin_jihuo_status eq 2">checked=""</if>>
                            <input type="radio" name="jiangjin_jihuo_status" value="3" title="审核中" <if condition="$info.jiangjin_jihuo_status eq 3">checked=""</if>>
                        </div>
                    </div> -->
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <input type="hidden" name="id" value="{$userDataInfo['id']}" />
                            <input type="hidden" name="user_id" value="{$info['user_id']}" />
                            <button class="layui-btn" id="submitBtn" lay-submit lay-filter="articleHandle">立即提交</button>
                            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                        </div>
                    </div>
                </form>
            </div>
        </fieldset>
    </div>
    <script src="__PUBLIC__/js/global.js"></script><!--全站通用js /-->
    <include file="Public/footer" />
    <script>
            layui.use(['layer', 'form', 'upload', 'laydate'], function () {
                var form = layui.form, $ = layui.jquery,upload = layui.upload;
                upload.render({
                    elem: '.uploadImg',
                    url:'{:U("Api/imageUp")}',
                    before: function(){
                    }
                    ,done: function(res, index, upload){
                        $('#'+this.data.field).val(res.data.src);
                        $('.'+this.data.field).attr('src', res.data.src);
                    }
                });
                //监听提交
                form.on('submit(articleHandle)', function (data) {
                    var ArticleInfo = data.field;
                    var obj = data.elem;
                    var url = "{:U('')}";
                    var index = layer.msg('提交中...', {icon:16, time:0, shade:0.1});
                    $.post(url, ArticleInfo, function (data) {
                        layer.close(index);
                        if (data.status != 1) {
                            layer.msg(data.msg, {icon: 5});
                        } else {
                            layer.msg(data.msg, {icon: 6, time: 2000});
                        }
                    });
                    return false;//阻止表单跳转
                });
            });
    </script>
</body>
</html>